# ุฅุตูุงุญุงุช ุงูุดุฌุฑุฉ ุงูููุณุนุฉ ููุนุงุฆูุฉ

## ุงููุดุงูู ุงูุชู ุชู ุฅุตูุงุญูุง

### 1. ูุดููุฉ ุชูุฑุงุฑ ุงูุฃุดุฎุงุต ๐
**ุงููุดููุฉ**: ูุงู ููุณ ุงูุดุฎุต ูุธูุฑ ูู ุงูุดุฌุฑุฉ ูู ุญุณุงุจ ุงูุฃุจ ูุญุณุงุจู ุงูุดุฎุตู ููุง ูุณุจุจ ุชูุฑุงุฑุงู ูุฑุจูุงู.

**ุงูุญู**:
- ุฅุถุงูุฉ ูุธุงู `processedPersons` ูุชุชุจุน ุงูุฃุดุฎุงุต ุงููุนุงูุฌูู
- ูุญุต ุงูุฃุณูุงุก ูุจู ุฅุถุงูุฉ ุงูุนุงุฆูุงุช ููุฑุจุท
- ููุน ุฑุจุท ุงูุนุงุฆูุงุช ุงูุชู ุชุญุชูู ุนูู ููุณ ุงูุฃุดุฎุงุต

### 2. ูุดููุฉ ุงูุงุณุชูุฑุงุฑูุฉ ุงูุฐููุฑูุฉ ๐จโ๐ฆ
**ุงููุดููุฉ**: ุงููุณุงุก ูู ูุธูุฑู ูุฑุคูุณ ุนุงุฆูุงุช ูููุตูุฉ ุจุฏูุงู ูู ุงุชุจุงุน ุงููุธุงู ุงูุฐููุฑู.

**ุงูุญู**:
- ุชุนุฏูู ุฏุงูุฉ `findAllLinkedFamilies` ูุชุฑูุฒ ุนูู ุงูุฐููุฑ ููุท
- ุฅุถุงูุฉ ุฏุงูุฉ `checkIfMaleUser` ููุชุญูู ูู ุฌูุณ ุงููุณุชุฎุฏู
- ุชูููุฏ ุงูุฑูุงุจุท ูุชุดูู ุงูุฑูุงุจุท ุงูุฐููุฑูุฉ ููุท (`parent-child`, `sibling`, `cousin`)

### 3. ูุดููุฉ ุจูุงุก ุงูุดุฌุฑุฉ ุงููุฑููุฉ ๐ณ
**ุงููุดููุฉ**: ุงูุดุฌุฑุฉ ูู ุชูู ุชุชุจุน ุงูุชุณูุณู ุงููุฑูู ุงูุตุญูุญ ููุฐููุฑ.

**ุงูุญู**:
- ุชุญุฏูุซ `buildExtendedTreeStructure` ูุชูููุฒ ุจูู ุงูุฐููุฑ ูุงูุฅูุงุซ
- ุงูุฐููุฑ (`ุงุจู`) ูุณุชูุฑูู ูู ุจูุงุก ุงูุดุฌุฑุฉ ูุน `canContinue: true`
- ุงูุฅูุงุซ (`ุจูุช`) ุชุธูุฑ ูุฃูุฑุงู ููุงุฆูุฉ ูุน `canContinue: false`
- ุฑุจุท ุงูุฃุทูุงู ุงูุฐููุฑ ุจุนุงุฆูุงุชูู ุงููููุตูุฉ ุนูุฏ ูุฌูุฏูุง

## ุงูุชุญุณููุงุช ุงููุถุงูุฉ

### 1. ููุน ุงูุชูุฑุงุฑ ูู ุงูุฑุจุท ๐ซ
```javascript
// ูุญุต ุงูุชูุฑุงุฑ ูุจู ุงูุฑุจุท
const isDuplicatePerson = await checkForDuplicatePersons(currentUserUid, selectedFamily.uid);
if (isDuplicatePerson) {
  throw new Error('ูุจุฏู ุฃู ููุงู ุฃุดุฎุงุต ูุดุชุฑููู ุจูู ุงูุนุงุฆูุชูู...');
}
```

### 2. ุฑุจุท ุงูุนุงุฆูุงุช ุงููููุตูุฉ ููุฐููุฑ ๐
```javascript
// ุฑุจุท ุงูุฃุทูุงู ุงูุฐููุฑ ุจุนุงุฆูุงุชูู ุงููููุตูุฉ
await linkMaleChildrenToTheirFamilies(extendedTree, allFamiliesData);
```

### 3. ุชุตููุฉ ุงูุนุงุฆูุงุช ุงููุชุงุญุฉ ููุฑุจุท ๐
```javascript
// ุงุณุชุจุนุงุฏ ุงูุนุงุฆูุงุช ุงูุชู ุชุญุชูู ุนูู ุฃุดุฎุงุต ููุฑุฑูู
const hasDuplicateMembers = await checkFamilyForDuplicates(members, currentUserMembers);
if (!hasDuplicateMembers) {
  families.push(familyData);
}
```

## ููููุฉ ุนูู ุงููุธุงู ุงูุฌุฏูุฏ

### ุจูุงุก ุงูุดุฌุฑุฉ ๐๏ธ
1. **ุงูุฌุฐุฑ**: ูุจุฏุฃ ูู ุฃูุฏู ุฐูุฑ ูู ุงูุณูุณูุฉ (ุงูุฌุฏ/ุงูุฃุจ)
2. **ุงููุฑูุน**: ุงูุฐููุฑ ููุท ูููููู ุฎุทูุท ุงููุณุจ
3. **ุงูุฃูุฑุงู**: ุงูุฅูุงุซ ุชุธูุฑ ูุฃุทูุงู ููุงุฆููู

### ููุน ุงูุชูุฑุงุฑ ๐ก๏ธ
1. **ูุญุต ุงูุฃุณูุงุก**: ููุงุฑูุฉ ุงูุงุณู ุงูุฃูู ูุงุณู ุงูุฃุจ
2. **ุชุชุจุน ุงููุนุงูุฌุฉ**: ูุธุงู `Set` ูุชุฌูุจ ุฅุนุงุฏุฉ ุงููุนุงูุฌุฉ
3. **ุงูุชุญูู ุงููุณุจู**: ูุญุต ุงูุชูุฑุงุฑ ูุจู ุงูุณูุงุญ ุจุงูุฑุจุท

### ุงูุงุณุชูุฑุงุฑูุฉ ุงูุฐููุฑูุฉ ๐งฌ
1. **ุฑุคูุณ ุงูุนุงุฆูุงุช**: ุงูุฐููุฑ ููุท ูุฑุคูุณ ุนุงุฆูุงุช
2. **ุงูุฑูุงุจุท**: ุชุฑูุฒ ุนูู ุงูุนูุงูุงุช ุงูุฐููุฑูุฉ
3. **ุงูุชูุณุน**: ุงูุฃุจูุงุก ุงูุฐููุฑ ูููููู ุฅูุดุงุก ูุฑูุน ุฌุฏูุฏุฉ

## ุงููุชุทูุจุงุช ุงูุชูููุฉ

### ูุงุนุฏุฉ ุงูุจูุงูุงุช ๐
```javascript
// ุจููุฉ ุงูุจูุงูุงุช ุงููุทููุจุฉ
{
  relation: 'ุฑุจ ุงูุนุงุฆูุฉ' | 'ุงุจู' | 'ุจูุช',
  firstName: string,
  fatherName: string,
  surname: string,
  gender?: 'male' | 'female' | 'ุฐูุฑ' | 'ุฃูุซู'
}
```

### ุงูุฑูุงุจุท ุงููุฏุนููุฉ ๐
- `parent-child`: ุนูุงูุฉ ุฃุจ-ุงุจู
- `child-parent`: ุนูุงูุฉ ุงุจู-ุฃุจ  
- `sibling`: ุนูุงูุฉ ุฅุฎูุฉ
- `cousin`: ุนูุงูุฉ ุฃุจูุงุก ุนู
- `extended`: ูุฑุงุจุฉ ุจุนูุฏุฉ (ุชุญุชุงุฌ ุชุญุฏูุฏ ุฅุถุงูู)

## ุงูุงุณุชุฎุฏุงู

### ูููุทูุฑูู ๐จโ๐ป
```javascript
// ุชุญููู ุงูุดุฌุฑุฉ ุงูููุณุนุฉ
const loadExtendedTree = async () => {
  // ุงููุธุงู ุงูุฌุฏูุฏ ูููุน ุงูุชูุฑุงุฑ ุชููุงุฆูุงู
  // ููุชุจุน ุงูุงุณุชูุฑุงุฑูุฉ ุงูุฐููุฑูุฉ
};

// ุฑุจุท ุนุงุฆูุฉ ุฌุฏูุฏุฉ
const createLink = async (targetFamily, linkType) => {
  // ุงููุธุงู ููุญุต ุงูุชูุฑุงุฑ ูุจู ุงูุฑุจุท
  // ููุฑูุถ ุงูุฑุจุท ุฅุฐุง ูุฌุฏ ุชูุฑุงุฑ
};
```

### ูููุณุชุฎุฏููู ๐ฅ
1. **ุฅูุดุงุก ุงูุญุณุงุจ**: ูุฑุจ ุนุงุฆูุฉ (ุฐูุฑ)
2. **ุฅุถุงูุฉ ุงูุฃุทูุงู**: ุงูุฐููุฑ ูุงูุฅูุงุซ
3. **ุฑุจุท ุงูุนุงุฆูุงุช**: ุจุงูุขุจุงุก ูุงูุฃุนูุงู ูุงูุฅุฎูุฉ
4. **ุชุฌูุจ ุงูุชูุฑุงุฑ**: ุงููุธุงู ูููุน ุฑุจุท ููุณ ุงูุดุฎุต ูุฑุชูู

## ููุงุญุธุงุช ูููุฉ โ๏ธ

1. **ุงููุธุงู ุงูุฐููุฑู**: ูุชุจุน ุงูุชูุงููุฏ ุงูุนุฑุจูุฉ ูู ุจูุงุก ุงูุฃูุณุงุจ
2. **ููุน ุงูุชูุฑุงุฑ**: ุญูุงูุฉ ูููุฉ ุถุฏ ุชูุฑุงุฑ ุงูุฃุดุฎุงุต
3. **ุงูุฃุฏุงุก**: ุชุญุณููุงุช ูู ุงูุชุญููู ูุงูุจุญุซ
4. **ุงููุฑููุฉ**: ูุฏุนู ุณููุงุฑูููุงุช ูุฎุชููุฉ ูุจูุงุก ุงูุดุฌุฑุฉ

## ุงูุชุญุฏูุซุงุช ุงููุณุชูุจููุฉ ๐

1. **ุฐูุงุก ุงุตุทูุงุนู**: ูุงูุชุดุงู ุงูุฑูุงุจุท ุงูุชููุงุฆูุฉ
2. **ุงูุชุญูู ุงููุชูุฏู**: ูุญุต ุฃุนูู ููุชูุฑุงุฑ
3. **ุฅุญุตุงุฆูุงุช ูุชุทูุฑุฉ**: ุชุญูููุงุช ุนุงุฆููุฉ ุดุงููุฉ
4. **ุชุตุฏูุฑ ูุชูุฏู**: ุชูุณููุงุช ูุชุนุฏุฏุฉ ููุดุฌุฑุฉ

---

ุชู ุฅูุฌุงุฒ ูุฐู ุงูุฅุตูุงุญุงุช ุจุชุงุฑูุฎ: 15 ููููู 2025
ุงููุทูุฑ: GitHub Copilot ๐ค
